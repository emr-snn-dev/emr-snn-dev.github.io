<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã‚·ãƒƒãƒ— | ç¯ ãƒäº•æŠ€è¡“ã‚¯ãƒ©ãƒ–</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700;900&family=Noto+Sans+JP:wght@400;900&display=swap" rel="stylesheet">
    <style>
        body { background: #f8fafc; color: #1e293b; margin: 0; font-family: 'Noto Sans JP', sans-serif; }
        .container { max-width: 1000px; margin: 0 auto; padding: 0 20px; }

        .translate-wrapper { text-align: right; padding: 15px; background: #fff; border-bottom: 1px solid #e2e8f0; }
        #google_translate_element { display: inline-block; }

        header { text-align: center; padding: 60px 20px; background: #fff; }
        header h1 { font-family: 'Orbitron'; font-size: 2.5rem; margin: 0; letter-spacing: 8px; color: #0f172a; }
        .sub-header { color: #00aeef; font-weight: 900; letter-spacing: 4px; margin-top: 5px; font-size: 0.9rem; }

        .category-section { margin-top: 60px; display: none; }
        .category-header { border-bottom: 3px solid #0f172a; margin-bottom: 30px; display: flex; align-items: baseline; gap: 15px; }
        .category-header h2 { font-size: 1.5rem; margin: 0; color: #0f172a; padding-bottom: 5px; }
        .category-header span { font-family: 'Orbitron'; font-size: 0.75rem; color: #94a3b8; letter-spacing: 2px; }

        .sponsor-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; }
        .sponsor-card { 
            background: #fff; border: 1px solid #e2e8f0; border-radius: 12px; 
            padding: 25px; transition: 0.4s; position: relative;
            display: flex; flex-direction: column;
        }
        .sponsor-card:hover { transform: translateY(-5px); border-color: #00aeef; box-shadow: 0 15px 30px rgba(0,0,0,0.05); }
        .partner-label { font-family: 'Orbitron'; font-size: 0.6rem; color: #00aeef; font-weight: 900; display: block; margin-bottom: 10px; }
        .partner-name { font-weight: 900; font-size: 1.2rem; color: #0f172a; margin-bottom: 15px; display: block; }
        .partner-desc { font-size: 0.85rem; color: #64748b; line-height: 1.8; border-top: 1px solid #f1f5f9; padding-top: 15px; flex-grow: 1; }

        /* ãƒªãƒ³ã‚¯ãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .web-link {
            display: inline-block; margin-top: 20px; padding: 10px 15px;
            background: #f1f5f9; color: #475569; text-decoration: none;
            border-radius: 6px; font-size: 0.75rem; font-weight: 900;
            text-align: center; transition: 0.3s; border: 1px solid #e2e8f0;
        }
        .web-link:hover { background: #00aeef; color: #fff; border-color: #00aeef; }
        .web-link::before { content: "ğŸ”—"; margin-right: 8px; }

        .sys-ver { position: fixed; bottom: 12px; right: 20px; font-family: 'Orbitron'; font-size: 0.6rem; color: #cbd5e1; }
    </style>
</head>
<body>

<div class="translate-wrapper">
    <div id="google_translate_element"></div>
</div>

<div class="sys-ver">v4.2.0 / PARTNER-LINK-GEN</div>
<div id="nav-container"></div>

<header>
    <h1>PARTNERS</h1>
    <div class="sub-header">ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã‚·ãƒƒãƒ—ãƒ»æ”¯æ´å”åŠ›</div>
</header>

<main class="container">
    <section id="sec-logistics" class="category-section">
        <div class="category-header"><h2>è¼¸é€å”åŠ›</h2><span>LOGISTICS</span></div>
        <div class="sponsor-grid"></div>
    </section>

    <section id="sec-material" class="category-section">
        <div class="category-header"><h2>è³‡æãƒ»ç‰©å“æä¾›</h2><span>MATERIAL</span></div>
        <div class="sponsor-grid"></div>
    </section>

    <section id="sec-tech" class="category-section">
        <div class="category-header"><h2>æŠ€è¡“æŒ‡å°ãƒ»ãƒ¡ãƒ³ã‚¿ãƒ¼</h2><span>TECHNOLOGY</span></div>
        <div class="sponsor-grid"></div>
    </section>

    <section id="sec-other" class="category-section">
        <div class="category-header"><h2>ãã®ä»–ã”æ”¯æ´</h2><span>OTHERS</span></div>
        <div class="sponsor-grid"></div>
    </section>
</main>

<script type="text/javascript">
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'ja', layout: google.translate.TranslateElement.InlineLayout.SIMPLE}, 'google_translate_element');
}
</script>
<script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<script src="menu.js"></script>

<script>
const GITHUB_ACCOUNT = "emr-snn-dev"; 
const REPO_TITLE = "emr-snn-dev.github.io";

async function loadSponsorsWithLinks() {
    try {
        const response = await fetch(`https://api.github.com/repos/${GITHUB_ACCOUNT}/${REPO_TITLE}/contents/sponsors`);
        const files = await response.json();
        
        for (const file of files) {
            if (!file.name.endsWith('.md')) continue;

            const rawContent = await fetch(file.download_url).then(r => r.text());
            
            // URLã‚’æŠ½å‡ºï¼ˆhttpã‹ã‚‰å§‹ã¾ã‚‹æ–‡å­—åˆ—ã‚’æ¢ã™ï¼‰
            const urlMatch = rawContent.match(/https?:\/\/[\w/:%#\$&\?\(\)~\.=\+\-]+/g);
            const webUrl = urlMatch ? urlMatch[0] : null;
            
            // URLã‚’é™¤ã„ãŸãƒ†ã‚­ã‚¹ãƒˆã‚’èª¬æ˜æ–‡ã«ã™ã‚‹
            const cleanDescription = rawContent.replace(webUrl, "").trim();
            
            const rawFileName = file.name.replace('.md', '');
            let catType = "ãã®ä»–";
            let compName = rawFileName;
            if (rawFileName.includes('-')) {
                const parts = rawFileName.split('-');
                catType = parts[0];
                compName = parts[1];
            }

            // ãƒªãƒ³ã‚¯ãŒã‚ã‚‹å ´åˆã®ã¿ãƒœã‚¿ãƒ³ã‚’ç”Ÿæˆ
            const linkButton = webUrl ? `<a href="${webUrl}" target="_blank" class="web-link">ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã‚’è¦‹ã‚‹</a>` : "";

            const cardHtml = `
                <div class="sponsor-card">
                    <span class="partner-label">OFFICIAL PARTNER</span>
                    <span class="partner-name">${compName}</span>
                    <div class="partner-desc">${marked.parse(cleanDescription)}</div>
                    ${linkButton}
                </div>
            `;

            let targetId = "";
            if (catType.includes("è¼¸é€")) targetId = "sec-logistics";
            else if (catType.includes("è³‡æ") || catType.includes("ç‰©å“")) targetId = "sec-material";
            else if (catType.includes("æŠ€è¡“") || catType.includes("æŒ‡å°")) targetId = "sec-tech";
            else targetId = "sec-other";

            const section = document.getElementById(targetId);
            section.querySelector('.sponsor-grid').insertAdjacentHTML('beforeend', cardHtml);
            section.style.display = 'block';
        }
    } catch (err) {
        console.log("ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼");
    }
}

loadSponsorsWithLinks();
</script>
</body>
</html>
